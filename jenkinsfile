pipeline {
    agent any

    stages {
        // ... (previous stages remain unchanged)

        stage('Deploy to SSH host') {
            when {
                expression {
                    return (env.BRANCH_NAME == 'Development' || env.BRANCH_NAME == 'Production' || env.BRANCH_NAME == 'Staging')
                }
            }
            steps {
                script {
                    withCredentials([sshUserPrivateKey(credentialsId: '4eed8674-a85f-40c9-8130-06391e4239c1', keyFileVariable: 'SSH_KEY')]) {
                        sh "scp -r /var/lib/jenkins/workspace/newnd_${env.BRANCH_NAME} ubuntu@13.232.231.36:/home/ubuntu/"
                    }
                }
            }
        }

        // Add more stages as needed
    }

    post {
        success {
            echo 'Pipeline succeeded! All stages completed successfully.'
        }
        failure {
            echo 'Pipeline failed! At least one stage failed.'
        }
    }
}
